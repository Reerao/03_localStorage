<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>あなたの物語</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>

<div class="wrap">    

    <h1>あなたの物語を伝えましょう</h1>

    <label>
        <span class="textbox-001-label">あなたの名前を教えてください</span>
        <input type="text" id="key" placeholder=""/>
    </label>

    <label>
    <span class="textbox-001-label">【起】あなたはどんな人ですか？</span>
    <input type="text" id="起" placeholder=""/>
    </label>

    <label>
        <span class="textbox-001-label">【承】誰のどんな課題を見つけましたか？</span>
        <input type="text" id="承" placeholder=""/>
    </label>

    <label>
        <span class="textbox-001-label">【転】その課題をどのように解決しますか？</span>
        <input type="text" id="転" placeholder=""/>
    </label>

    <label>
        <span class="textbox-001-label">【結】解決できるとどんな世界になりますか？</span>
        <input type="text" id="結" placeholder=""/>
    </label>


    <button id="save">save</button>
    <button id="clear">clear</button>


    <!-- <button class="button-001">update</button>
    <button class="button-001">clear</button> -->


    <table id="list">
        <!-- ここに追加データが挿入される -->
    </table>
    
</div>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<script>


$("#save").on("click",function(){

    const key = $("#key").val();
    const value1 = $("#起").val();
    const value2 = $("#承").val();
    const value3 = $("#転").val();
    const value4 = $("#結").val();

    const value = [value1,value2,value3,value4]

    let json = JSON.stringify(value, undefined, 1);
	localStorage.setItem(key, json);

    // localStorage.setItem(key,value);

    const html = `

        ${key}さんのストーリー</br>
        私は${value[0]}人です。</br>
        そんな私は${value[1]}課題を見つけました。</br>
        その課題を${value[2]}ことで解決します。</br>
        そうすることで、${value[3]}を実現します！！！</br>
        </br>        
    `
    $("#list").append(html)

})

$("#clear").on("click", function(){
    localStorage.clear();
    $("#list").empty();
})

for(let i=0; i<localStorage.length; i++){
    const key = localStorage.key(i);
    
    let json = localStorage.getItem(key);
	let value = JSON.parse(json);

    const html = `
  
    ${key}さんのストーリー</br>
    私は${value[0]}人です。</br>
    そんな私は${value[1]}課題を見つけました。</br>
    その課題を${value[2]}ことで解決します。</br>
    そうすることで、${value[3]}を実現します！！！</br>
    </br>
        
    `

    $("#list").append(html)

}


</script>

</body>
</html>